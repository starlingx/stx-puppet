[global]
##
## Default Data Set
##
<%- if @global_parameters -%>
<%- @global_parameters.each do |key,value| -%>
<%- if @service == 'ts2phc' and key == 'ts2phc.nmea_serialport' and @gpsd_monitored_devices.include?(value) -%>
<%= key %> <%= value %>.pty
<%- else -%>
<%= key %> <%= value %>
<%- end -%>
<%- end -%>
<%- end -%>

<%- if @service == 'synce4l' -%>
[<<%= @_name %>>]
<%- if @device_parameters -%>
<%- @device_parameters.each do |key,value| -%>
<%= key %> <%= value %>
<%- end -%>
<%- end -%>
<%- end -%>

<%- if @service == 'ptp4l' -%>
<%- if @section_parameters -%>
<%- @section_parameters.each do |section,parameters_list| -%>
<%- if section.start_with?("unicast_master_table") %>

[unicast_master_table]
##
## Associated with section: <%= section %>
##
<%- parameters_list.each do |parameter_dict| -%>
<%- parameter_dict.each do |key, value| -%>
<%= key %> <%= value %>
<%- end -%>
<%- end -%>
<%- end -%>
<%- end -%>
<%- end -%>
<%- end -%>

<%- if @interfaces -%>
<%- @interfaces.each do |interface| %>
<%- interface['port_names'].each do |port| -%>
[<%= port %>]
##
## Associated interface: <%= interface['ifname'] %>
##
<%- interface['parameters'].each do |key,value| -%>
<%= key %> <%= value %>
<%- end -%>
<%- end -%>
<%- end -%>
<%- end -%>

<%- if @service == 'synce4l' -%>
<%- if !@external_source.empty? -%>
[{<%= @external_source['name'] %>}]
<%- if @external_source['params'] -%>
<%- @external_source['params'].each do |key,value| -%>
<%= key %> <%= value %>
<%- end -%>
<%- end -%>
<%- end -%>
<%- end -%>
